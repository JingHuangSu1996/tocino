/*! For license information please see components-focus-scope-src-FocusScope-stories.35c6ff56.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktocino_ui=self.webpackChunktocino_ui||[]).push([[583],{"./packages/components/focus-scope/src/FocusScope.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FocusScope:()=>FocusScope_stories_FocusScope,__namedExportsOrder:()=>__namedExportsOrder,default:()=>FocusScope_stories});var react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),focusableElements=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],FOCUSABLE_ELEMENT_SELECTOR=focusableElements.join(",")+",[tabindex]";focusableElements.push('[tabindex]:not([tabindex="-1"])');var TABBABLE_ELEMENT_SELECTOR=focusableElements.join(':not([tabindex="-1"]),'),sharedState={activeScope:null};function getScopeRoot(scope){return scope[0].parentElement}function getFocusableTreeWalker(root,opts,scope){var selector=null!=opts&&opts.tabbable?TABBABLE_ELEMENT_SELECTOR:FOCUSABLE_ELEMENT_SELECTOR,walker=document.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,{acceptNode:function acceptNode(node){var _opts$from;return null!==(_opts$from=opts.from)&&void 0!==_opts$from&&_opts$from.contains(node)?NodeFilter.FILTER_REJECT:!node.matches(selector)||scope&&!isElementInScope(node,scope)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}});return opts.from&&(walker.currentNode=opts.from),walker}function isElementInScope(el,scope){return!(!scope||!el)&&(scope.includes(el)||scope.some((function(node){return node.contains(el)})))}function focusFirstInScope(scope){if(scope){var sential=scope[0].previousElementSibling,root=getScopeRoot(scope);if(root&&sential){var walker=getFocusableTreeWalker(root,{tabbable:!0},scope);walker.currentNode=sential,focusElement(walker.nextNode())}}}function focusElement(el){if(el)try{el.focus()}catch(err){console.warn(err)}}var createFocusManager=function createFocusManager(scopeRef){var getSentinelStart=function getSentinelStart(scope){return scope[0].previousElementSibling},getSentinelEnd=function getSentinelEnd(scope){return scope[scope.length-1].nextElementSibling},focusNode=function focusNode(node){return node&&focusElement(node),node};return{focusNext:function focusNext(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},scope=scopeRef.current,from=opts.from,tabbable=opts.tabbable,wrap=opts.wrap,node=from||document.activeElement,sential=getSentinelStart(scope),walker=getFocusableTreeWalker(getScopeRoot(scope),{tabbable},scope);walker.currentNode=isElementInScope(node,scope)?node:sential;var nextNode=walker.nextNode();return!nextNode&&wrap&&(walker.currentNode=sential,nextNode=walker.nextNode()),focusNode(nextNode)},focusPrevious:function focusPrevious(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},scope=scopeRef.current,from=opts.from,tabbable=opts.tabbable,wrap=opts.wrap,node=from||document.activeElement,sential=getSentinelEnd(scope),walker=getFocusableTreeWalker(getScopeRoot(scope),{tabbable},scope);walker.currentNode=isElementInScope(node,scope)?node:sential;var previousNode=walker.previousNode();return!previousNode&&wrap&&(walker.currentNode=sential,previousNode=walker.previousNode()),focusNode(previousNode)},focusFirst:function focusFirst(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},scope=scopeRef.current,tabbable=opts.tabbable,walker=getFocusableTreeWalker(getScopeRoot(scope),{tabbable},scope);return walker.currentNode=getSentinelStart(scope),focusNode(walker.nextNode())},focusLast:function focusLast(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},scope=scopeRef.current,tabbable=opts.tabbable,walker=getFocusableTreeWalker(getScopeRoot(scope),{tabbable},scope);return walker.currentNode=getSentinelEnd(scope),focusNode(walker.previousNode())}}};try{getScopeRoot.displayName="getScopeRoot",getScopeRoot.__docgenInfo={description:"",displayName:"getScopeRoot",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/utils/index.tsx#getScopeRoot"]={docgenInfo:getScopeRoot.__docgenInfo,name:"getScopeRoot",path:"packages/components/focus-scope/src/utils/index.tsx#getScopeRoot"})}catch(__react_docgen_typescript_loader_error){}try{focusFirstInScope.displayName="focusFirstInScope",focusFirstInScope.__docgenInfo={description:"",displayName:"focusFirstInScope",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/utils/index.tsx#focusFirstInScope"]={docgenInfo:focusFirstInScope.__docgenInfo,name:"focusFirstInScope",path:"packages/components/focus-scope/src/utils/index.tsx#focusFirstInScope"})}catch(__react_docgen_typescript_loader_error){}try{focusElement.displayName="focusElement",focusElement.__docgenInfo={description:"",displayName:"focusElement",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/utils/index.tsx#focusElement"]={docgenInfo:focusElement.__docgenInfo,name:"focusElement",path:"packages/components/focus-scope/src/utils/index.tsx#focusElement"})}catch(__react_docgen_typescript_loader_error){}try{createFocusManager.displayName="createFocusManager",createFocusManager.__docgenInfo={description:"",displayName:"createFocusManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/utils/index.tsx#createFocusManager"]={docgenInfo:createFocusManager.__docgenInfo,name:"createFocusManager",path:"packages/components/focus-scope/src/utils/index.tsx#createFocusManager"})}catch(__react_docgen_typescript_loader_error){}var useRestoreFocus=function useRestoreFocus(restoreFocus){(0,react.useLayoutEffect)((function(){var nodeToRestore=document.activeElement;return function(){restoreFocus&&nodeToRestore&&requestAnimationFrame((function(){document.body.contains(nodeToRestore)&&focusElement(nodeToRestore)}))}}),[restoreFocus])};try{useRestoreFocus.displayName="useRestoreFocus",useRestoreFocus.__docgenInfo={description:"",displayName:"useRestoreFocus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/hooks/useRestoreFocus.tsx#useRestoreFocus"]={docgenInfo:useRestoreFocus.__docgenInfo,name:"useRestoreFocus",path:"packages/components/focus-scope/src/hooks/useRestoreFocus.tsx#useRestoreFocus"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),FocusScopeContext=react.createContext(null),FocusScopeProvider=function FocusScopeProvider(props){return(0,jsx_runtime.jsx)(FocusScopeContext.Provider,{value:{focusManager:props.focusManager},children:props.children})};FocusScopeProvider.displayName="FocusScopeProvider";try{FocusScopeContext.displayName="FocusScopeContext",FocusScopeContext.__docgenInfo={description:"======== Context ========",displayName:"FocusScopeContext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/context/index.tsx#FocusScopeContext"]={docgenInfo:FocusScopeContext.__docgenInfo,name:"FocusScopeContext",path:"packages/components/focus-scope/src/context/index.tsx#FocusScopeContext"})}catch(__react_docgen_typescript_loader_error){}try{FocusScopeProvider.displayName="FocusScopeProvider",FocusScopeProvider.__docgenInfo={description:"",displayName:"FocusScopeProvider",props:{focusManager:{defaultValue:null,description:"",name:"focusManager",required:!0,type:{name:"FocusManager"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/context/index.tsx#FocusScopeProvider"]={docgenInfo:FocusScopeProvider.__docgenInfo,name:"FocusScopeProvider",path:"packages/components/focus-scope/src/context/index.tsx#FocusScopeProvider"})}catch(__react_docgen_typescript_loader_error){}var _FocusScope$parameter,_FocusScope$parameter2,_FocusScope$parameter3,FocusScope=function FocusScope(_ref){var children=_ref.children,_ref$autoFocus=_ref.autoFocus,autoFocus=void 0!==_ref$autoFocus&&_ref$autoFocus,_ref$contain=_ref.contain,contain=void 0!==_ref$contain&&_ref$contain,_ref$restoreFocus=_ref.restoreFocus,restoreFocus=void 0!==_ref$restoreFocus&&_ref$restoreFocus,startRef=(0,react.useRef)(null),endRef=(0,react.useRef)(null),scopeRef=(0,react.useRef)([]);(0,react.useEffect)((function(){for(var _startRef$current,node=null===(_startRef$current=startRef.current)||void 0===_startRef$current?void 0:_startRef$current.nextSibling,nodes=[];node&&node!==endRef.current;)nodes.push(node),node=node.nextSibling;scopeRef.current=nodes}),[children]),function useAutoFocus(scopeRef,autoFocus){(0,react.useEffect)((function(){autoFocus&&(sharedState.activeScope=scopeRef.current,isElementInScope(document.activeElement,sharedState.activeScope)||focusFirstInScope(scopeRef.current))}),[scopeRef,autoFocus])}(scopeRef,autoFocus),function useFocusContainment(scopeRef,contain){var focusNode=(0,react.useRef)();(0,react.useEffect)((function(){if(contain){var onKeyDown=function onKeyDown(e){if(!("Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey)){var focusedElement=document.activeElement,scope=scopeRef.current;if(scope&&isElementInScope(focusedElement,scope)){var walker=getFocusableTreeWalker(getScopeRoot(scope),{tabbable:!0},scope);walker.currentNode=focusedElement;var lastPosition=scope.length-1,nextElement=e.shiftKey?walker.previousNode():walker.nextNode();nextElement||(walker.currentNode=e.shiftKey?scope[lastPosition].nextElementSibling:scope[0].previousElementSibling,nextElement=e.shiftKey?walker.previousNode():walker.nextNode()),e.preventDefault(),nextElement&&focusElement(nextElement)}}},onFocus=function onFocus(e){var scope=scopeRef.current,isInScope=isElementInScope(e.target,scope);!isInScope||sharedState.activeScope&&isElementInScope(e.target,sharedState.activeScope)||(sharedState.activeScope=scope),isInScope&&(focusNode.current=e.target),sharedState.activeScope===scope&&(focusNode.current?focusNode.current.focus():focusFirstInScope(scope))};return document.addEventListener("keydown",onKeyDown,!1),document.addEventListener("focusin",onFocus,!1),function(){document.removeEventListener("keydown",onKeyDown,!1),document.removeEventListener("focusin",onFocus,!1)}}}),[scopeRef,contain])}(scopeRef,contain),useRestoreFocus(restoreFocus);var focusManager=createFocusManager(scopeRef);return(0,jsx_runtime.jsxs)(FocusScopeProvider,{focusManager,children:[(0,jsx_runtime.jsx)("span",{hidden:!0,ref:startRef}),children,(0,jsx_runtime.jsx)("span",{hidden:!0,ref:endRef})]})};FocusScope.displayName="FocusScope",FocusScope.displayName="FocusScope";try{FocusScope.displayName="FocusScope",FocusScope.__docgenInfo={description:"",displayName:"FocusScope",props:{autoFocus:{defaultValue:{value:"false"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},contain:{defaultValue:{value:"false"},description:"",name:"contain",required:!1,type:{name:"boolean"}},restoreFocus:{defaultValue:{value:"false"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/focus-scope/src/FocusScope.tsx#FocusScope"]={docgenInfo:FocusScope.__docgenInfo,name:"FocusScope",path:"packages/components/focus-scope/src/FocusScope.tsx#FocusScope"})}catch(__react_docgen_typescript_loader_error){}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const FocusScope_stories={title:"FocusScope",component:FocusScope};var Template=function Template(){var _React$useState2=_slicedToArray(react.useState(!1),2),show=_React$useState2[0],setShow=_React$useState2[1];return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:function onClick(){return setShow(!0)},children:"Show the dialog"}),show&&(0,jsx_runtime.jsx)(FocusScope,{autoFocus:!0,contain:!0,restoreFocus:!0,children:(0,jsx_runtime.jsx)("dialog",{id:"favDialog",style:{display:"flex"},children:(0,jsx_runtime.jsxs)("form",{children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("input",{placeholder:"name"})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("input",{placeholder:"address"})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("input",{placeholder:"phone"})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{value:"cancel",onClick:function onClick(){return setShow(!1)},children:"Cancel"}),(0,jsx_runtime.jsx)("button",{id:"confirmBtn",value:"default",onClick:function onClick(){return setShow(!1)},children:"Confirm"})]})]})})})]})};Template.displayName="Template";var FocusScope_stories_FocusScope=Template.bind({});FocusScope_stories_FocusScope.args={},FocusScope_stories_FocusScope.parameters=_objectSpread(_objectSpread({},FocusScope_stories_FocusScope.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_FocusScope$parameter=FocusScope_stories_FocusScope.parameters)||void 0===_FocusScope$parameter?void 0:_FocusScope$parameter.docs),{},{source:_objectSpread({originalSource:'() => {\n  const [show, setShow] = React.useState(false);\n  return <div>\n      <button onClick={() => setShow(true)}>Show the dialog</button>\n      {show && <Component autoFocus contain restoreFocus>\n          <dialog id="favDialog" style={{\n        display: \'flex\'\n      }}>\n            <form>\n              <div>\n                <input placeholder="name" />\n              </div>\n              <div>\n                <input placeholder="address" />\n              </div>\n              <div>\n                <input placeholder="phone" />\n              </div>\n              <div>\n                <button value="cancel" onClick={() => setShow(false)}>\n                  Cancel\n                </button>\n                <button id="confirmBtn" value="default" onClick={() => setShow(false)}>\n                  Confirm\n                </button>\n              </div>\n            </form>\n          </dialog>\n        </Component>}\n    </div>;\n}'},null===(_FocusScope$parameter2=FocusScope_stories_FocusScope.parameters)||void 0===_FocusScope$parameter2||null===(_FocusScope$parameter3=_FocusScope$parameter2.docs)||void 0===_FocusScope$parameter3?void 0:_FocusScope$parameter3.source)})});var __namedExportsOrder=["FocusScope"]},"./node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.jsx=q,exports.jsxs=q},"./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);